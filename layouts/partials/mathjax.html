{{ if or (eq (.Param "mathjax") true) (and .IsPage (eq .Site.Params.math.enable true)) }}
<script src="{{ .Param "mathjaxPath" | default .Site.Params.math.mathjaxPath }}"></script>
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],  // 行内公式定界符
      displayMath: [['$$', '$$'], ['\\[', '\\]']],  // 块级公式定界符
      processEscapes: true,  // 处理转义字符
      tags: 'ams'  // 支持编号公式
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script>
  // 确保文档加载完成后触发 MathJax 渲染
  document.addEventListener('DOMContentLoaded', function() {
    if (window.MathJax) MathJax.typesetPromise();
  });
</script>
{{ end }}